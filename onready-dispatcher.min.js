window.ReadyDispatcher=function(){function e(){this.callbacks={on:{},onready:{}};this.isReady={};this.responses={};this.aliases={}}e.prototype={on:function(a,b){a=this.getLabel(a);(this.callbacks.on[a]||(this.callbacks.on[a]=[])).push(b)},off:function(a,b){a=this.getLabel(a);for(var d=this.callbacks.on[a],c=d.length;c--;)d[c]===b&&d.splice(c,1)},onready:function(a,b){a=this.getLabel(a);this.isReady[a]?b.apply(null,this.responses[a]):(this.isReady[a]=!1,(this.callbacks.onready[a]||(this.callbacks.onready[a]=
[])).push(b))},trigger:function(a){a=this.getLabel(a);for(var b=(this.callbacks.on[a]||[]).concat(this.callbacks.onready[a]),d=[].slice.call(arguments,1),c=0,e=b.length;c<e;c++){var f=b[c];"function"===typeof f&&f.apply(null,d)}a in this.isReady&&(this.isReady[a]=!0,this.responses[a]=d,delete this.callbacks.onready[a])},alias:function(a){for(var b in a)a.hasOwnProperty(b)&&(this.aliases[b]=a[b])},getLabel:function(a){return this.aliases[a]||a}};return e}();
