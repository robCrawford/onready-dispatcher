window.ReadyDispatcher=function(){function c(){this.callbacks={on:{},onready:{}};this.isReady={};this.responses={};this.aliases={}}c.prototype={on:function(a,b){a=this.getLabel(a);(this.callbacks.on[a]||(this.callbacks.on[a]=[])).push(b)},onready:function(a,b){a=this.getLabel(a);this.isReady[a]?b.apply(null,this.responses[a]):(this.isReady[a]=!1,(this.callbacks.onready[a]||(this.callbacks.onready[a]=[])).push(b))},trigger:function(a){a=this.getLabel(a);for(var b=(this.callbacks.on[a]||[]).concat(this.callbacks.onready[a]),
c=[].slice.call(arguments,1),d=0,f=b.length;d<f;d++){var e=b[d];"function"===typeof e&&e.apply(null,c)}a in this.isReady&&(this.isReady[a]=!0,this.responses[a]=c,delete this.callbacks.onready[a])},alias:function(a){for(var b in a)a.hasOwnProperty(b)&&(this.aliases[b]=a[b])},getLabel:function(a){return this.aliases[a]||a}};return c}();
